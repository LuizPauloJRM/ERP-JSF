<!DOCTYPE html>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:f="http://xmlns.jcp.org/jsf/core"
    xmlns:p="http://primefaces.org/ui"
    xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
    template="/WEB-INF/template/Layout.xhtml">

    <!-- Define o título da página -->
    <ui:define name="titulo">
        Cadastro de Funcionários
    </ui:define>

    <!-- Define o conteúdo principal -->
    <ui:define name="conteudo">

        <h:form id="frmFuncionario">
            <h2>Cadastro de Funcionários</h2>

            <p:messages id="msgs" autoUpdate="true" closable="true" showDetail="true" />

            <p:panelGrid id="gridFuncionario" columns="2" styleClass="ui-noborder" cellpadding="5">

                <p:outputLabel for="nome" value="Nome:" />
                <p:inputText id="nome" value="#{funcionarioBean.funcionario.nome}" required="true"
                             requiredMessage="O nome do funcionário é obrigatório." style="width:250px" />

                <p:outputLabel for="cargo" value="Cargo:" />
                <p:inputText id="cargo" value="#{funcionarioBean.funcionario.cargo}" style="width:250px" />

                <p:outputLabel for="salario" value="Salário:" />
                <p:inputText id="salario" value="#{funcionarioBean.funcionario.salario}" style="width:250px" label="Salário">
                    <f:convertNumber minFractionDigits="2" />
                </p:inputText>

                <p:outputLabel for="empresa" value="Empresa:" />
                <p:selectOneMenu id="empresa" value="#{funcionarioBean.funcionario.empresa}" style="width:250px"
                                 converter="empresaConverter">
                    <f:selectItem itemLabel="Selecione" itemValue="#{null}" />
                    <f:selectItems value="#{empresaBean.empresas}" var="emp"
                                   itemLabel="#{emp.nomeFantasia}" itemValue="#{emp}" />
                </p:selectOneMenu>

            </p:panelGrid>

            <p:separator />
            <p:commandButton value="Salvar" icon="pi pi-save"
                             actionListener="#{funcionarioBean.salvar}"
                             update="@form msgs" process="@form" />

            <p:commandButton value="Limpar" icon="pi pi-times"
                             type="reset" styleClass="ui-button-secondary" />

            <p:separator />

            <p:dataTable id="tabelaFuncionarios" var="f"
                         value="#{funcionarioBean.funcionarios}"
                         paginator="true" rows="5" style="margin-top:10px">

                <p:column headerText="ID">
                    <h:outputText value="#{f.id}" />
                </p:column>

                <p:column headerText="Nome">
                    <h:outputText value="#{f.nome}" />
                </p:column>

                <p:column headerText="Cargo">
                    <h:outputText value="#{f.cargo}" />
                </p:column>

                <p:column headerText="Salário">
                    <h:outputText value="#{f.salario}">
                        <f:convertNumber type="currency" currencySymbol="R$ " />
                    </h:outputText>
                </p:column>

                <p:column headerText="Empresa">
                    <h:outputText value="#{f.empresa.nomeFantasia}" />
                </p:column>

            </p:dataTable>

        </h:form>

    </ui:define>
</ui:composition>
